<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VACATION IDEAS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --fire-gradient: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            --success-gradient: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 35px 60px -12px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: all 1s ease;
        }

        body.mood-adventure { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); }
        body.mood-relax { background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); }
        body.mood-culture { background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); }
        body.mood-nature { background: linear-gradient(135deg, #00b894 0%, #00a085 100%); }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80') no-repeat center center/cover;
            opacity: 0.3;
            z-index: -1;
            transition: all 1s ease;
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .particle.fire { background: #ff6b6b; }
        .particle.water { background: #74b9ff; }
        .particle.earth { background: #00b894; }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
        }

        .main-container {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 14px;
            padding: 12px 6px;
            max-width: 320px;
            width: 100%;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card.shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .card:hover::before {
            left: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 12px;
        }

        .logo {
            font-size: 1.2rem;
            margin-bottom: 2px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 2px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 0.7rem;
            color: var(--text-secondary);
            font-weight: 400;
            line-height: 1.5;
        }

        .mood-selector {
            display: flex;
            gap: 4px;
            justify-content: center;
            margin: 8px 0;
            flex-wrap: wrap;
        }

        .mood-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 12px;
            font-size: 0.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            position: relative;
        }

        .mood-btn.active {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .mood-btn:hover {
            transform: translateY(-2px);
        }

        .inspire-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 7px 14px;
            border-radius: 18px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin: 8px auto 0 auto;
            display: block;
            box-shadow: 0 2px 6px rgba(102, 126, 234, 0.2);
        }

        .inspire-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .inspire-btn:active {
            transform: translateY(-1px);
        }

        .inspire-btn i {
            margin-right: 5px;
        }

        .trip-display {
            display: none;
            text-align: center;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .trip-header {
            text-align: center;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }

        .trip-header .app-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .trip-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 12px 8px;
            margin: 7px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); }
            to { box-shadow: 0 4px 20px rgba(79, 172, 254, 0.3); }
        }

        .trip-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent-gradient);
        }

        .trip-badge {
            display: inline-block;
            background: var(--accent-gradient);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.6rem;
            font-weight: 600;
            margin-bottom: 6px;
            text-transform: uppercase;
            animation: pulse 2s infinite;
        }

        .trip-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .trip-description {
            font-size: 0.7rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 6px;
        }

        .weather-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 4px 8px;
            margin: 6px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.6rem;
        }

        .cost-estimate {
            background: var(--success-gradient);
            color: white;
            border-radius: 6px;
            padding: 4px 8px;
            margin: 6px 0;
            font-size: 0.6rem;
            font-weight: 600;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .trip-details {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 3px;
            margin-top: 4px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 2px;
            color: var(--text-secondary);
            font-size: 0.65rem;
        }

        .detail-item i {
            color: #4facfe;
            width: 12px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 24px 0;
        }

        .spinner {
            width: 30px;
            height: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-top: 2px solid #4facfe;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .action-buttons {
            display: flex;
            gap: 4px;
            justify-content: center;
            margin-top: 7px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 5px 10px;
            border: none;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 3px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease;
        }

        .btn:active::before {
            width: 200%;
            height: 200%;
        }

        .btn-primary {
            background: var(--secondary-gradient);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 7px;
            padding-top: 4px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: scale(1.1);
        }

        .stat-number {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--text-primary);
            animation: countUp 0.5s ease-out;
        }

        @keyframes countUp {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .stat-label {
            font-size: 0.5rem;
            color: var(--text-secondary);
            margin-top: 1px;
        }

        .error-message {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #ffcdd2;
            padding: 8px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
            font-size: 0.7rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-gradient);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.7rem;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .ai-suggestion {
            background: rgba(138, 43, 226, 0.2);
            border: 1px solid rgba(138, 43, 226, 0.3);
            border-radius: 6px;
            padding: 4px 8px;
            margin: 4px 0;
            font-size: 0.6rem;
            color: #dda0dd;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .card {
                padding: 8px 2px;
                margin: 2px;
                max-width: 99vw;
            }
            .title {
                font-size: 0.8rem;
            }
            .logo {
                font-size: 0.9rem;
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .shake-hint {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.5rem;
            color: var(--text-secondary);
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <div class="main-container">
        <div class="card" id="mainCard">
            <div class="header">
                <div class="logo">üå¥</div>
                <h1 class="title">VACATION IDEAS</h1>
            </div>

            <div class="mood-selector">
                <button class="mood-btn" data-mood="adventure">üèîÔ∏è Adventure</button>
                <button class="mood-btn" data-mood="relax">üèñÔ∏è Relax</button>
                <button class="mood-btn" data-mood="culture">üèõÔ∏è Culture</button>
                <button class="mood-btn" data-mood="nature">üåø Nature</button>
            </div>

            <button class="inspire-btn pulse" id="inspireBtn">
                <i class="fas fa-magic"></i>
                Inspire My Journey
            </button>

            <div class="shake-hint">üí° Shake your device for random trip!</div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Crafting your perfect adventure...</p>
            </div>

            <div class="trip-display" id="tripDisplay">
                <div class="trip-card" id="tripCard">
                    <h3 class="trip-title" id="tripTitle"></h3>
                    <p class="trip-description" id="tripDescription"></p>
                    <div class="weather-info" id="weatherInfo"></div>
                    <div class="cost-estimate" id="costEstimate"></div>
                    <div class="ai-suggestion" id="aiSuggestion"></div>
                    <div class="trip-details" id="tripDetails"></div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="newTripBtn">
                        <i class="fas fa-random"></i>
                        New Adventure
                    </button>
                    <button class="btn btn-secondary" id="saveTripBtn">
                        <i class="fas fa-heart"></i>
                        Save Trip
                    </button>
                    <button class="btn btn-secondary" id="shareTripBtn">
                        <i class="fas fa-share"></i>
                        Share
                    </button>
                </div>
    </div>

            <div class="error-message" id="errorMessage"></div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="tripsGenerated">0</div>
                    <div class="stat-label">Trips Generated</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="savedTrips">0</div>
                    <div class="stat-label">Saved Trips</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="countriesVisited">0</div>
                    <div class="stat-label">Countries</div>
                </div>
        </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        class MindBlowingVacationApp {
            constructor() {
                this.tripsGenerated = 0;
                this.savedTrips = 0;
                this.countriesVisited = new Set();
                this.currentTrip = null;
                this.currentMood = null;
                this.sounds = {
                    generate: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmFiHEU8lt7HdSsFJHDA7eGWRAoTXLPn4qBMGhhv3PLGfuiBaL8J'),
                    save: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmIhA3Zr6Kg=='),
                    click: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmDWZGYh2PA=')
                };
                
                this.initializeElements();
                this.createDynamicParticles();
                this.loadStats();
                this.bindEvents();
                this.setupShakeDetection();
                this.startAmbientEffects();
            }

            initializeElements() {
                this.inspireBtn = document.getElementById('inspireBtn');
                this.loading = document.getElementById('loading');
                this.tripDisplay = document.getElementById('tripDisplay');
                this.tripTitle = document.getElementById('tripTitle');
                this.tripDescription = document.getElementById('tripDescription');
                this.tripDetails = document.getElementById('tripDetails');
                this.weatherInfo = document.getElementById('weatherInfo');
                this.costEstimate = document.getElementById('costEstimate');
                this.aiSuggestion = document.getElementById('aiSuggestion');
                this.newTripBtn = document.getElementById('newTripBtn');
                this.saveTripBtn = document.getElementById('saveTripBtn');
                this.shareTripBtn = document.getElementById('shareTripBtn');
                this.errorMessage = document.getElementById('errorMessage');
                this.mainCard = document.getElementById('mainCard');
                
                // Stats elements
                this.tripsGeneratedEl = document.getElementById('tripsGenerated');
                this.savedTripsEl = document.getElementById('savedTrips');
                this.countriesVisitedEl = document.getElementById('countriesVisited');
            }

            createDynamicParticles() {
                const particlesContainer = document.getElementById('particles');
                for (let i = 0; i < 60; i++) {
                    const particle = document.createElement('div');
                    const types = ['', 'fire', 'water', 'earth'];
                    const type = types[Math.floor(Math.random() * types.length)];
                    particle.className = `particle ${type}`;
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                    particlesContainer.appendChild(particle);
                }
            }

            bindEvents() {
                this.inspireBtn.addEventListener('click', () => {
                    this.playSound('click');
                    this.generateTrip();
                });
                this.newTripBtn.addEventListener('click', () => {
                    this.playSound('click');
                    this.generateTrip();
                });
                this.saveTripBtn.addEventListener('click', () => {
                    this.playSound('save');
                    this.saveTrip();
                });
                this.shareTripBtn.addEventListener('click', () => {
                    this.playSound('click');
                    this.shareTrip();
                });

                // Mood selector - support both click and touch events
                document.querySelectorAll('.mood-btn').forEach(btn => {
                    const activateMood = (e) => {
                        e.preventDefault();
                        this.playSound('click');
                        this.setMood(btn.dataset.mood);
                        document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    };
                    btn.addEventListener('click', activateMood);
                    btn.addEventListener('touchstart', activateMood, {passive: false});
                });
            }

            setupShakeDetection() {
                if (window.DeviceMotionEvent) {
                    window.addEventListener('devicemotion', (e) => {
                        const acceleration = e.accelerationIncludingGravity;
                        const threshold = 15;
                        
                        if (Math.abs(acceleration.x) > threshold || 
                            Math.abs(acceleration.y) > threshold || 
                            Math.abs(acceleration.z) > threshold) {
                            this.triggerShakeGeneration();
                        }
                    });
                }
            }

            triggerShakeGeneration() {
                this.mainCard.classList.add('shake');
                this.showNotification('üé≤ Shake detected! Generating random trip...');
                setTimeout(() => {
                    this.mainCard.classList.remove('shake');
                    this.generateTrip();
                }, 500);
            }

            setMood(mood) {
                this.currentMood = mood;
                document.body.className = `mood-${mood}`;
                
                // Update particles based on mood
                const particles = document.querySelectorAll('.particle');
                particles.forEach(p => {
                    p.className = 'particle';
                    if (mood === 'adventure') p.classList.add('fire');
                    else if (mood === 'relax') p.classList.add('water');
                    else if (mood === 'nature') p.classList.add('earth');
                });
            }

            startAmbientEffects() {
                setInterval(() => {
                    if (this.currentTrip) {
                        this.updateWeatherInfo();
                    }
                }, 30000);
            }

            playSound(type) {
                if (this.sounds[type]) {
                    this.sounds[type].currentTime = 0;
                    this.sounds[type].play().catch(() => {});
                }
            }

            showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            async generateTrip() {
                // Show header elements when generating new trip
                document.querySelector('.header').style.display = 'block';
                this.inspireBtn.style.display = 'block';
                
                // Clear previous trip header and badge
                const existingHeader = document.querySelector('.trip-header');
                const existingBadge = document.querySelector('.trip-badge');
                if (existingHeader) existingHeader.remove();
                if (existingBadge) existingBadge.remove();
                
                this.showLoading();
                this.hideError();
                this.playSound('generate');
                
                setTimeout(async () => {
                    try {
                        // Try to get real travel data from free APIs
                        const trip = await this.getTripFromAPI();
                        this.displayTrip(trip);
                        this.updateStats();
                    } catch (error) {
                        console.error('API error:', error);
                        // Fallback to local data with enhanced variety
                        const trip = this.generateLocalTrip();
                        this.displayTrip(trip);
                        this.updateStats();
                    }
                }, 100);
            }

            async getTripFromAPI() {
                try {
                    // Get random country data
                    const countriesResponse = await fetch('https://restcountries.com/v3.1/all');
                    const countries = await countriesResponse.json();
                    const randomCountry = countries[Math.floor(Math.random() * countries.length)];

                    // Generate trip based on country data
                    const trip = this.createTripFromCountry(randomCountry);
                    return trip;
            } catch (error) {
                    throw new Error('API unavailable');
                }
            }

            createTripFromCountry(country) {
                const activities = this.getActivitiesByMood();
                const accommodations = [
                    'luxury resort', 'boutique hotel', 'eco-lodge', 'historic inn',
                    'beachfront villa', 'mountain cabin', 'city apartment',
                    'treehouse retreat', 'desert camp', 'island bungalow'
                ];

                const durations = ['3 days', '5 days', '1 week', '10 days', '2 weeks'];
                const budgets = ['Budget-friendly', 'Mid-range', 'Luxury', 'Premium'];

                const activity = activities[Math.floor(Math.random() * activities.length)];
                const accommodation = accommodations[Math.floor(Math.random() * accommodations.length)];
                const duration = durations[Math.floor(Math.random() * durations.length)];
                const budget = budgets[Math.floor(Math.random() * budgets.length)];

                return {
                    title: `${activity.charAt(0).toUpperCase() + activity.slice(1)} in ${country.name.common}`,
                    description: `Experience the perfect blend of ${activity} and ${accommodation} in the beautiful ${country.name.common}. Discover ${country.capital?.[0] || 'its capital'} and immerse yourself in the local culture, cuisine, and breathtaking landscapes.`,
                    country: country.name.common,
                    capital: country.capital?.[0] || 'Various cities',
                    region: country.region,
                    duration: duration,
                    budget: budget,
                    activity: activity,
                    accommodation: accommodation,
                    weather: this.generateWeather(),
                    cost: this.estimateCost(budget, duration),
                    aiTip: this.generateAITip(activity, country.name.common)
                };
            }

            getActivitiesByMood() {
                const moodActivities = {
                    adventure: ['mountain climbing', 'white water rafting', 'skydiving', 'rock climbing', 'zip lining'],
                    relax: ['spa retreat', 'beach lounging', 'meditation', 'yoga retreat', 'thermal springs'],
                    culture: ['museum tours', 'historical exploration', 'local festivals', 'art galleries', 'cultural immersion'],
                    nature: ['wildlife safari', 'national park hiking', 'bird watching', 'nature photography', 'eco tours']
                };

                return moodActivities[this.currentMood] || [
                    'cultural exploration', 'adventure sports', 'culinary journey', 
                    'historical discovery', 'nature retreat', 'urban exploration',
                    'beach relaxation', 'mountain hiking', 'wildlife safari',
                    'art and architecture', 'local markets', 'spiritual retreat'
                ];
            }

            generateLocalTrip() {
                const destinations = [
                    'Bali, Indonesia', 'Santorini, Greece', 'Kyoto, Japan', 'Marrakech, Morocco',
                    'Reykjavik, Iceland', 'Cusco, Peru', 'Hanoi, Vietnam', 'Cape Town, South Africa',
                    'Queenstown, New Zealand', 'Banff, Canada', 'Patagonia, Chile', 'Zanzibar, Tanzania',
                    'Bhutan', 'Maldives', 'Swiss Alps', 'Amalfi Coast, Italy', 'Machu Picchu, Peru',
                    'Petra, Jordan', 'Angkor Wat, Cambodia', 'Easter Island, Chile'
                ];

                const activities = this.getActivitiesByMood();
                const uniqueCombinations = [];
                for (let dest of destinations) {
                    for (let activity of activities) {
                        uniqueCombinations.push({ destination: dest, activity: activity });
                    }
                }

                const randomIndex = Math.floor(Math.random() * uniqueCombinations.length);
                const selected = uniqueCombinations[randomIndex];

                return {
                    title: `${selected.activity} in ${selected.destination}`,
                    description: `Embark on an unforgettable journey to ${selected.destination} for ${selected.activity.toLowerCase()}. Experience the perfect blend of adventure, culture, and natural beauty in one of the world's most captivating destinations.`,
                    country: selected.destination.split(', ')[1] || selected.destination,
                    capital: selected.destination.split(', ')[0],
                    region: this.getRegion(selected.destination),
                    duration: this.getRandomDuration(),
                    budget: this.getRandomBudget(),
                    activity: selected.activity,
                    accommodation: this.getRandomAccommodation(),
                    weather: this.generateWeather(),
                    cost: this.estimateCost(this.getRandomBudget(), this.getRandomDuration()),
                    aiTip: this.generateAITip(selected.activity, selected.destination)
                };
            }

            generateWeather() {
                const conditions = ['‚òÄÔ∏è Sunny', '‚õÖ Partly Cloudy', 'üåßÔ∏è Light Rain', '‚ùÑÔ∏è Snow', 'üå™Ô∏è Windy'];
                const temp = Math.floor(Math.random() * 40) + 10; // 10-50¬∞C
                const condition = conditions[Math.floor(Math.random() * conditions.length)];
                return `${condition} ${temp}¬∞C`;
            }

            estimateCost(budget, duration) {
                const baseCosts = {
                    'Budget-friendly': 25,
                    'Mid-range': 65,
                    'Luxury': 150,
                    'Premium': 280
                };
                const durationMultiplier = {
                    '3 days': 3,
                    '5 days': 5,
                    '1 week': 7,
                    '10 days': 10,
                    '2 weeks': 14
                };
                
                const base = baseCosts[budget] || 50;
                const days = durationMultiplier[duration] || 7;
                const total = base * days;
                
                return `$${total.toLocaleString()} estimated total`;
            }

            generateAITip(activity, destination) {
                const tips = [
                    `üí° Best time for ${activity} in ${destination} is during local dry season`,
                    `üéí Pack light, breathable clothing for optimal comfort`,
                    `üì± Download offline maps and translation apps before departure`,
                    `üí∞ Book accommodations 2-3 months in advance for better deals`,
                    `üçΩÔ∏è Try local street food for authentic cultural experiences`,
                    `üì∏ Golden hour photography creates stunning travel memories`,
                    `üöó Consider local transportation for immersive experiences`,
                    `üåç Learn basic local phrases to connect with locals`,
                ];
                return tips[Math.floor(Math.random() * tips.length)];
            }

            updateWeatherInfo() {
                if (this.currentTrip) {
                    this.weatherInfo.innerHTML = `<i class="fas fa-thermometer-half"></i> ${this.generateWeather()}`;
                }
            }

            getRegion(destination) {
                const regions = {
                    'Asia': ['Bali', 'Kyoto', 'Hanoi', 'Bhutan', 'Maldives', 'Petra', 'Angkor Wat'],
                    'Europe': ['Santorini', 'Reykjavik', 'Swiss Alps', 'Amalfi Coast'],
                    'Africa': ['Marrakech', 'Cape Town', 'Zanzibar'],
                    'Americas': ['Cusco', 'Banff', 'Patagonia', 'Machu Picchu', 'Easter Island'],
                    'Oceania': ['Queenstown']
                };

                for (let [region, cities] of Object.entries(regions)) {
                    if (cities.some(city => destination.includes(city))) {
                        return region;
                    }
                }
                return 'Various';
            }

            getRandomDuration() {
                const durations = ['3 days', '5 days', '1 week', '10 days', '2 weeks'];
                return durations[Math.floor(Math.random() * durations.length)];
            }

            getRandomBudget() {
                const budgets = ['Budget-friendly', 'Mid-range', 'Luxury', 'Premium'];
                return budgets[Math.floor(Math.random() * budgets.length)];
            }

            getRandomAccommodation() {
                const accommodations = [
                    'luxury resort', 'boutique hotel', 'eco-lodge', 'historic inn',
                    'beachfront villa', 'mountain cabin', 'city apartment'
                ];
                return accommodations[Math.floor(Math.random() * accommodations.length)];
            }

            displayTrip(trip) {
                this.currentTrip = trip;
                
                this.tripTitle.textContent = trip.title;
                this.tripDescription.textContent = trip.description;
                
                this.weatherInfo.innerHTML = `<i class="fas fa-thermometer-half"></i> ${trip.weather}`;
                this.costEstimate.textContent = trip.cost;
                this.aiSuggestion.textContent = trip.aiTip;
                
                this.tripDetails.innerHTML = `
                    <div class="detail-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${trip.capital}, ${trip.country}</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-clock"></i>
                        <span>${trip.duration}</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-dollar-sign"></i>
                        <span>${trip.budget}</span>
                    </div>
                    <div class="detail-item">
                        <i class="fas fa-bed"></i>
                        <span>${trip.accommodation}</span>
                    </div>
                `;

                // Add trip header and badge
                const tripHeader = `
                    <div class="trip-header">
                        <div class="app-title">
                            <span>üå¥</span>
                            <span>VACATION IDEAS</span>
                        </div>
                    </div>
                `;
                
                const tripBadge = `<div class="trip-badge">Your Adventure</div>`;
                
                document.getElementById('tripCard').insertAdjacentHTML('afterbegin', tripBadge);
                this.tripDisplay.insertAdjacentHTML('afterbegin', tripHeader);

                this.hideLoading();
                
                // Hide header elements for clean professional look
                document.querySelector('.header').style.display = 'none';
                this.inspireBtn.style.display = 'none';
                
                this.tripDisplay.style.display = 'block';
                this.tripDisplay.classList.add('fade-in');
                
                // Add country to visited set
                this.countriesVisited.add(trip.country);
                
                this.showNotification('‚ú® Amazing trip generated!');
            }

            showLoading() {
                this.loading.style.display = 'block';
                this.tripDisplay.style.display = 'none';
                this.inspireBtn.style.display = 'none';
            }

            hideLoading() {
                this.loading.style.display = 'none';
                this.inspireBtn.style.display = 'block';
            }

            hideError() {
                this.errorMessage.style.display = 'none';
            }

            showError(message) {
                this.errorMessage.textContent = message;
                this.errorMessage.style.display = 'block';
                this.hideLoading();
            }

            saveTrip() {
                if (!this.currentTrip) return;
                
                const savedTrips = JSON.parse(localStorage.getItem('savedTrips') || '[]');
                savedTrips.push({
                    ...this.currentTrip,
                    savedAt: new Date().toISOString()
                });
                
                localStorage.setItem('savedTrips', JSON.stringify(savedTrips));
                this.savedTrips = savedTrips.length;
                this.updateStats();
                
                // Show success feedback
                this.saveTripBtn.innerHTML = '<i class="fas fa-check"></i> Saved!';
                this.showNotification('üíæ Trip saved successfully!');
                setTimeout(() => {
                    this.saveTripBtn.innerHTML = '<i class="fas fa-heart"></i> Save Trip';
                }, 2000);
            }

            shareTrip() {
                if (!this.currentTrip) return;
                
                const text = `üå¥ ${this.currentTrip.title}\n\n${this.currentTrip.description}\n\nGenerated by VACATION IDEAS ‚ú®`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'My Next Adventure',
                        text: text,
                        url: window.location.href
                    });
                } else {
                    // Fallback to clipboard
                    navigator.clipboard.writeText(text).then(() => {
                        this.shareTripBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        this.showNotification('üìã Trip copied to clipboard!');
                        setTimeout(() => {
                            this.shareTripBtn.innerHTML = '<i class="fas fa-share"></i> Share';
                        }, 2000);
                    });
                }
            }

            updateStats() {
                this.tripsGenerated++;
                this.tripsGeneratedEl.textContent = this.tripsGenerated;
                this.savedTripsEl.textContent = this.savedTrips;
                this.countriesVisitedEl.textContent = this.countriesVisited.size;
                
                localStorage.setItem('wanderlustStats', JSON.stringify({
                    tripsGenerated: this.tripsGenerated,
                    savedTrips: this.savedTrips,
                    countriesVisited: Array.from(this.countriesVisited)
                }));
            }

            loadStats() {
                const stats = JSON.parse(localStorage.getItem('wanderlustStats') || '{}');
                this.tripsGenerated = stats.tripsGenerated || 0;
                this.savedTrips = stats.savedTrips || 0;
                this.countriesVisited = new Set(stats.countriesVisited || []);
                
                this.tripsGeneratedEl.textContent = this.tripsGenerated;
                this.savedTripsEl.textContent = this.savedTrips;
                this.countriesVisitedEl.textContent = this.countriesVisited.size;
            }
        }

        // Initialize the mind-blowing app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new MindBlowingVacationApp();
        });
    </script>
</body>
</html>
